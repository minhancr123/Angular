<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5>NHÃN HIỆU</h5>
    <div class="d-flex gap-2 align-items-center">
      <button mat-raised-button color="primary" (click)="onSubmit()" *ngIf="nhanHieuService.Visible">
        <mat-icon>add</mat-icon>
        Thêm mới
      </button>
      <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item>
          <mat-icon>file_upload</mat-icon>
          <span>Import Excel</span>
        </button>
        <button mat-menu-item>
          <mat-icon>file_download</mat-icon>
          <span>Export Excel</span>
        </button>
      </mat-menu>
    </div>
  </div>

  <div class="card-body">
    <!-- Search bar -->
    <div class="row mb-3">
      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Tìm kiếm</mat-label>
          <input matInput placeholder="Tìm kiếm tất cả nội dung" [formControl]="searchControl">
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
      </div>
      <div class="col-md-8 text-end">
        <button mat-raised-button color="warn" [disabled]="!selectedItems.length" *ngIf="nhanHieuService.Visible" (click)="deleteSelected()">
          <mat-icon>delete</mat-icon>
          Xóa nhãn hiệu
        </button>
        <span class="ms-2">Số lượng đã chọn: {{selectedItems.length}}</span>
      </div>
    </div>

    <!-- Table -->
     <div class="table-responsive">
       <table mat-table [dataSource]="dataSource" class="table w-100">
         <!-- Checkbox Column -->
         <ng-container matColumnDef="select">
           <th mat-header-cell *matHeaderCellDef>
             <mat-checkbox (change)="toggleAllRows($event)"
             [checked]="selection.hasValue() && isAllSelected()"
             [indeterminate]="selection.hasValue() && !isAllSelected()">
            </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row">
            <mat-checkbox (click)="$event.stopPropagation()"
            (change)="toggleSelection(row)"
            [checked]="isSelected(row)">
          </mat-checkbox>
        </td>
      </ng-container>
      
      <!-- STT Column -->
      <ng-container matColumnDef="stt">
        <th mat-header-cell *matHeaderCellDef>STT</th>
        <td mat-cell *matCellDef="let element; let i = index"> {{i + 1}} </td>
      </ng-container>
      
      <!-- Name Column -->
      <ng-container matColumnDef="tenNhanHieu">
        <th mat-header-cell *matHeaderCellDef>
          <span class="d-inline-flex align-items-center">
            Tên nhãn hiệu
            <app-sort-icon
            column="tenNhanHieu"
            [activeColumn]="sorting.column"
            [activeDirection]="sorting.direction"
            (sort)="sort($event)">
          </app-sort-icon>
        </span>
      </th>
      <td mat-cell *matCellDef="let element"> {{element.TenNhanHieu}} </td>
    </ng-container>
    
    <!-- Actions Column -->
    <ng-container matColumnDef="thaoTac">
      <th mat-header-cell *matHeaderCellDef> Thao tác </th>
      <td mat-cell *matCellDef="let element">
        <button mat-icon-button color="primary" (click)="onEdit(element)" *ngIf="nhanHieuService.Visible">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="onDelete(element.IdNhanHieu)" *ngIf="nhanHieuService.Visible">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>
    
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>
  
    <!-- Paginator -->
    <app-paginator
      [paginator]="paginator"
      [isLoading]="isLoading"
      (paginate)="paginate($event)">
    </app-paginator>
  </div>
</div>
